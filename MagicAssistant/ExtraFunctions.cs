using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Threading;

namespace MagicAssistant
{
    public partial class MainWindow : Window
    {
        string game_over = "{ \"transactionId\": \"bd069dc0-1e41-4d69-abbc-e86678930cb9\", \"timestamp\": \"637499304490476939\", \"greToClientEvent\": { \"greToClientMessages\": [ { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 165, \"gameStateId\": 118, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 118, \"gameInfo\": { \"matchID\": \"e2f2343e-ff48-4734-8189-e87d88282c25\", \"gameNumber\": 1, \"stage\": \"GameStage_GameOver\", \"type\": \"GameType_Duel\", \"variant\": \"GameVariant_Normal\", \"matchState\": \"MatchState_GameComplete\", \"matchWinCondition\": \"MatchWinCondition_SingleElimination\", \"results\": [ { \"scope\": \"MatchScope_Game\", \"result\": \"ResultType_WinLoss\", \"winningTeamId\": 2, \"reason\": \"ResultReason_Concede\" } ], \"deckConstraintInfo\": { \"maxDeckSize\": 250, \"maxSideboardSize\": 250 } }, \"prevGameStateId\": 117, \"timers\": [ { \"timerId\": 1, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"elapsedSec\": 283, \"running\": true, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990, \"elapsedMs\": 283255 } ], \"update\": \"GameStateUpdate_SendAndRecord\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 179, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 3 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 2 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 166 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 163 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 167 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 165 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 172 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 166, \"gameStateId\": 119, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 119, \"gameInfo\": { \"matchID\": \"e2f2343e-ff48-4734-8189-e87d88282c25\", \"gameNumber\": 1, \"stage\": \"GameStage_GameOver\", \"type\": \"GameType_Duel\", \"variant\": \"GameVariant_Normal\", \"matchState\": \"MatchState_MatchComplete\", \"matchWinCondition\": \"MatchWinCondition_SingleElimination\", \"results\": [ { \"scope\": \"MatchScope_Game\", \"result\": \"ResultType_WinLoss\", \"winningTeamId\": 2, \"reason\": \"ResultReason_Concede\" }, { \"scope\": \"MatchScope_Match\", \"result\": \"ResultType_WinLoss\", \"winningTeamId\": 2, \"reason\": \"ResultReason_Concede\" } ], \"deckConstraintInfo\": { \"maxDeckSize\": 250, \"maxSideboardSize\": 250 } }, \"prevGameStateId\": 118, \"timers\": [ { \"timerId\": 1, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"elapsedSec\": 283, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990, \"elapsedMs\": 283255 } ], \"update\": \"GameStateUpdate_SendAndRecord\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 179, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 3 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 2 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 166 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 163 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 167 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 165 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 172 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 167, \"gameStateId\": 120, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 120, \"turnInfo\": { \"phase\": \"Phase_Main1\", \"turnNumber\": 6, \"activePlayer\": 1, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_BeginCombat\" }, \"pendingMessageCount\": 1, \"prevGameStateId\": 119, \"update\": \"GameStateUpdate_SendAndRecord\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 179, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 3 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 2 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 166 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 163 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 167 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 165 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 172 } } ] } }, { \"type\": \"GREMessageType_IntermissionReq\", \"systemSeatIds\": [ 1 ], \"msgId\": 168, \"gameStateId\": 120, \"intermissionReq\": { \"options\": [ { \"optionPrompt\": { \"promptId\": 30 }, \"responseType\": \"ClientMessageType_DrawCardResp\" }, { \"optionPrompt\": { \"promptId\": 29 }, \"responseType\": \"ClientMessageType_RevealHandResp\" } ], \"intermissionPrompt\": { \"promptId\": 27, \"parameters\": [ { \"parameterName\": \"WinningTeamId\", \"type\": \"ParameterType_Number\", \"numberValue\": 2 } ] }, \"gameResultType\": \"ResultType_WinLoss\", \"winningTeamId\": 2, \"result\": { \"scope\": \"MatchScope_Match\", \"result\": \"ResultType_WinLoss\", \"winningTeamId\": 2, \"reason\": \"ResultReason_Concede\" } } } ] } }";
        string game_start = "{ \"transactionId\": \"a32b4a1d-b942-4c53-a42d-8e60d42bd462\", \"timestamp\": \"637498806042868491\", \"greToClientEvent\": { \"greToClientMessages\": [ { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 3, \"gameStateId\": 1, \"gameStateMessage\": { \"type\": \"GameStateType_Full\", \"gameStateId\": 1, \"gameInfo\": { \"matchID\": \"3b9e225c-74c9-49e3-91c2-2329b8076016\", \"gameNumber\": 1, \"stage\": \"GameStage_Start\", \"type\": \"GameType_Duel\", \"variant\": \"GameVariant_Normal\", \"matchState\": \"MatchState_GameInProgress\", \"matchWinCondition\": \"MatchWinCondition_SingleElimination\", \"deckConstraintInfo\": { \"maxDeckSize\": 250, \"maxSideboardSize\": 250 } }, \"teams\": [ { \"id\": 1, \"playerIds\": [ 1 ] }, { \"id\": 2, \"playerIds\": [ 2 ] } ], \"players\": [ { \"lifeTotal\": 20, \"systemSeatNumber\": 1, \"maxHandSize\": 7, \"teamId\": 1, \"timerIds\": [ 1 ], \"controllerSeatId\": 1, \"controllerType\": \"ControllerType_Player\", \"startingLifeTotal\": 20 }, { \"lifeTotal\": 20, \"systemSeatNumber\": 2, \"maxHandSize\": 7, \"teamId\": 2, \"timerIds\": [ 2 ], \"controllerSeatId\": 2, \"controllerType\": \"ControllerType_Player\", \"pendingMessageType\": \"ClientMessageType_ChooseStartingPlayerResp\", \"startingLifeTotal\": 20 } ], \"turnInfo\": { \"decisionPlayer\": 2 }, \"zones\": [ { \"zoneId\": 18, \"type\": \"ZoneType_Revealed\", \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 1 }, { \"zoneId\": 19, \"type\": \"ZoneType_Revealed\", \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 2 }, { \"zoneId\": 24, \"type\": \"ZoneType_Suppressed\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 25, \"type\": \"ZoneType_Pending\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 26, \"type\": \"ZoneType_Command\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 27, \"type\": \"ZoneType_Stack\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 28, \"type\": \"ZoneType_Battlefield\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 29, \"type\": \"ZoneType_Exile\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 30, \"type\": \"ZoneType_Limbo\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 31, \"type\": \"ZoneType_Hand\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 1, \"viewers\": [ 1 ] }, { \"zoneId\": 32, \"type\": \"ZoneType_Library\", \"visibility\": \"Visibility_Hidden\", \"ownerSeatId\": 1, \"objectInstanceIds\": [ 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98 ] }, { \"zoneId\": 33, \"type\": \"ZoneType_Graveyard\", \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 1 }, { \"zoneId\": 34, \"type\": \"ZoneType_Sideboard\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 1, \"viewers\": [ 1 ] }, { \"zoneId\": 35, \"type\": \"ZoneType_Hand\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 2, \"viewers\": [ 2 ] }, { \"zoneId\": 36, \"type\": \"ZoneType_Library\", \"visibility\": \"Visibility_Hidden\", \"ownerSeatId\": 2, \"objectInstanceIds\": [ 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158 ] }, { \"zoneId\": 37, \"type\": \"ZoneType_Graveyard\", \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 2 }, { \"zoneId\": 38, \"type\": \"ZoneType_Sideboard\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 2, \"viewers\": [ 2 ] } ], \"timers\": [ { \"timerId\": 1, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990 }, { \"timerId\": 2, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"running\": true, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990, \"elapsedMs\": 3 } ], \"update\": \"GameStateUpdate_SendAndRecord\" } } ] } }";
        string card_played = "{ \"transactionId\": \"4979622a-677f-4cfb-a83c-1e4176533ce9\", \"timestamp\": \"637499389142147534\", \"greToClientEvent\": { \"greToClientMessages\": [ { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 93, \"gameStateId\": 65, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 65, \"zones\": [ { \"zoneId\": 28, \"type\": \"ZoneType_Battlefield\", \"visibility\": \"Visibility_Public\", \"objectInstanceIds\": [ 167, 165, 163, 160, 159 ] }, { \"zoneId\": 30, \"type\": \"ZoneType_Limbo\", \"visibility\": \"Visibility_Public\", \"objectInstanceIds\": [ 166, 47, 100, 106, 162, 46, 104, 99 ] }, { \"zoneId\": 31, \"type\": \"ZoneType_Hand\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 1, \"objectInstanceIds\": [ 45, 44, 43, 42, 41, 40, 39 ], \"viewers\": [ 1 ] } ], \"gameObjects\": [ { \"instanceId\": 166, \"grpId\": 75556, \"type\": \"GameObjectType_Card\", \"zoneId\": 30, \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 1, \"controllerSeatId\": 1, \"superTypes\": [ \"SuperType_Basic\" ], \"cardTypes\": [ \"CardType_Land\" ], \"subtypes\": [ \"SubType_Plains\" ], \"viewers\": [ 1 ], \"name\": 648, \"abilities\": [ 1001 ], \"overlayGrpId\": 75556 }, { \"instanceId\": 167, \"grpId\": 75556, \"type\": \"GameObjectType_Card\", \"zoneId\": 28, \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 1, \"controllerSeatId\": 1, \"superTypes\": [ \"SuperType_Basic\" ], \"cardTypes\": [ \"CardType_Land\" ], \"subtypes\": [ \"SubType_Plains\" ], \"name\": 648, \"abilities\": [ 1001 ], \"overlayGrpId\": 75556 } ], \"annotations\": [ { \"id\": 91, \"affectedIds\": [ 166 ], \"type\": [ \"AnnotationType_ObjectIdChanged\" ], \"details\": [ { \"key\": \"orig_id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 166 ] }, { \"key\": \"new_id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 167 ] } ] }, { \"id\": 92, \"affectedIds\": [ 167 ], \"type\": [ \"AnnotationType_ZoneTransfer\" ], \"details\": [ { \"key\": \"zone_src\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 31 ] }, { \"key\": \"zone_dest\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 28 ] }, { \"key\": \"category\", \"type\": \"KeyValuePairValueType_string\", \"valueString\": [ \"PlayLand\" ] } ] }, { \"id\": 93, \"affectorId\": 1, \"affectedIds\": [ 167 ], \"type\": [ \"AnnotationType_UserActionTaken\" ], \"details\": [ { \"key\": \"actionType\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] }, { \"key\": \"abilityGrpId\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] } ], \"pendingMessageCount\": 1, \"prevGameStateId\": 64, \"timers\": [ { \"timerId\": 1, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"running\": true, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990, \"elapsedMs\": 1 } ], \"update\": \"GameStateUpdate_SendAndRecord\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 163 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1001, \"sourceId\": 167 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 165 } } ], \"persistentAnnotations\": [ { \"id\": 5, \"affectorId\": 28, \"affectedIds\": [ 167 ], \"type\": [ \"AnnotationType_EnteredZoneThisTurn\" ] } ], \"diffDeletedPersistentAnnotationIds\": [ 9 ] } }, { \"type\": \"GREMessageType_ActionsAvailableReq\", \"systemSeatIds\": [ 1 ], \"msgId\": 94, \"gameStateId\": 65, \"prompt\": { \"promptId\": 2 }, \"actionsAvailableReq\": { \"actions\": [ { \"actionType\": \"ActionType_Cast\", \"grpId\": 75451, \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ], \"shouldStop\": true, \"autoTapSolution\": { \"autoTapActions\": [ { \"instanceId\": 163, \"abilityGrpId\": 1001, \"manaPaymentOption\": { \"mana\": [ { \"manaId\": 52, \"color\": \"ManaColor_White\", \"srcInstanceId\": 163, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] }, \"costCategory\": \"CostCategory_Automatic\" }, { \"instanceId\": 167, \"abilityGrpId\": 1001, \"manaPaymentOption\": { \"mana\": [ { \"manaId\": 51, \"color\": \"ManaColor_White\", \"srcInstanceId\": 167, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] }, \"costCategory\": \"CostCategory_Automatic\" } ] } }, { \"actionType\": \"ActionType_Cast\", \"grpId\": 75451, \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ], \"shouldStop\": true, \"autoTapSolution\": { \"autoTapActions\": [ { \"instanceId\": 163, \"abilityGrpId\": 1001, \"manaPaymentOption\": { \"mana\": [ { \"manaId\": 52, \"color\": \"ManaColor_White\", \"srcInstanceId\": 163, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] }, \"costCategory\": \"CostCategory_Automatic\" }, { \"instanceId\": 167, \"abilityGrpId\": 1001, \"manaPaymentOption\": { \"mana\": [ { \"manaId\": 51, \"color\": \"ManaColor_White\", \"srcInstanceId\": 167, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] }, \"costCategory\": \"CostCategory_Automatic\" } ] } }, { \"actionType\": \"ActionType_Cast\", \"grpId\": 75450, \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ], \"shouldStop\": true, \"autoTapSolution\": { \"autoTapActions\": [ { \"instanceId\": 163, \"abilityGrpId\": 1001, \"manaPaymentOption\": { \"mana\": [ { \"manaId\": 52, \"color\": \"ManaColor_White\", \"srcInstanceId\": 163, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] }, \"costCategory\": \"CostCategory_Automatic\" }, { \"instanceId\": 167, \"abilityGrpId\": 1001, \"manaPaymentOption\": { \"mana\": [ { \"manaId\": 51, \"color\": \"ManaColor_White\", \"srcInstanceId\": 167, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] }, \"costCategory\": \"CostCategory_Automatic\" } ] } }, { \"actionType\": \"ActionType_Activate_Mana\", \"grpId\": 75556, \"instanceId\": 163, \"abilityGrpId\": 1001, \"manaPaymentOptions\": [ { \"mana\": [ { \"manaId\": 52, \"color\": \"ManaColor_White\", \"srcInstanceId\": 163, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] } ], \"maxActivations\": 1, \"isBatchable\": true }, { \"actionType\": \"ActionType_Activate_Mana\", \"grpId\": 75556, \"instanceId\": 167, \"abilityGrpId\": 1001, \"manaPaymentOptions\": [ { \"mana\": [ { \"manaId\": 51, \"color\": \"ManaColor_White\", \"srcInstanceId\": 167, \"specs\": [ { \"type\": \"ManaSpecType_Predictive\" } ], \"abilityGrpId\": 1001 } ] } ], \"maxActivations\": 1, \"isBatchable\": true }, { \"actionType\": \"ActionType_Pass\" }, { \"actionType\": \"ActionType_FloatMana\" } ], \"inactiveActions\": [ { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 42 }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 43 }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 44 }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 45 } ] } } ] } }";
        string deck_cards = "{ \"transactionId\": \"82b95994-3286-4518-8bfd-4d02168c751d\", \"timestamp\": \"637499522069792533\", \"greToClientEvent\": { \"greToClientMessages\": [ { \"type\": \"GREMessageType_ConnectResp\", \"systemSeatIds\": [ 1 ], \"msgId\": 1, \"connectResp\": { \"status\": \"ConnectionStatus_Success\", \"buildVer\": 1, \"protoVer\": \"ProtoVersion_PersistentAnnotations\", \"settings\": { \"stops\": [ { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" } ], \"autoPassOption\": \"AutoPassOption_ResolveMyStackEffects\", \"graveyardOrder\": \"OrderingType_OrderArbitraryAlways\", \"manaSelectionType\": \"ManaSelectionType_Auto\", \"defaultAutoPassOption\": \"AutoPassOption_ResolveMyStackEffects\", \"smartStopsSetting\": \"SmartStopsSetting_Enable\", \"autoTapStopsSetting\": \"AutoTapStopsSetting_Enable\", \"autoOptionalPaymentCancellationSetting\": \"Setting_Enable\", \"transientStops\": [ { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" } ] }, \"deckMessage\": { \"deckCards\": [ 75451, 75451, 75450, 75556, 75556, 75556, 75556, 75556, 75556, 75444, 75463, 75556, 75450, 75454, 75463, 75556, 75556, 75463, 75556, 75556, 75450, 75451, 75446, 75446, 75556, 75556, 75457, 75556, 75458, 75458, 75556, 75453, 75448, 75452, 75556, 75556, 75463, 75446, 75556, 75457, 75450, 75556, 75556, 75446, 75556, 75456, 75445, 75442, 75556, 75556, 75556, 75462, 75447, 75460, 75459, 75556, 75453, 75454, 75453, 75460 ] }, \"grpVersion\": { \"buildVersion\": 1 }, \"greVersion\": { \"majorVersion\": 21, \"minorVersion\": 2 } } } ] } }";
        string play = "{ \"transactionId\": \"fb39a01d-a60d-43f3-8863-d26cac12f481\", \"timestamp\": \"637499580156650522\", \"greToClientEvent\": { \"greToClientMessages\": [ { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 16, \"gameStateId\": 6, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 6, \"zones\": [ { \"zoneId\": 27, \"type\": \"ZoneType_Stack\", \"visibility\": \"Visibility_Public\", \"objectInstanceIds\": [ 160 ] }, { \"zoneId\": 30, \"type\": \"ZoneType_Limbo\", \"visibility\": \"Visibility_Public\", \"objectInstanceIds\": [ 104, 99 ] }, { \"zoneId\": 35, \"type\": \"ZoneType_Hand\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 2, \"objectInstanceIds\": [ 105, 103, 102, 101, 100 ], \"viewers\": [ 2 ] } ], \"gameObjects\": [ { \"instanceId\": 159, \"grpId\": 75557, \"type\": \"GameObjectType_Card\", \"zoneId\": 28, \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 2, \"controllerSeatId\": 2, \"superTypes\": [ \"SuperType_Basic\" ], \"cardTypes\": [ \"CardType_Land\" ], \"subtypes\": [ \"SubType_Swamp\" ], \"isTapped\": true, \"name\": 653, \"abilities\": [ 1003 ], \"overlayGrpId\": 75557 }, { \"instanceId\": 160, \"grpId\": 75504, \"type\": \"GameObjectType_Card\", \"zoneId\": 27, \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 2, \"controllerSeatId\": 2, \"cardTypes\": [ \"CardType_Creature\" ], \"subtypes\": [ \"SubType_Rat\" ], \"color\": [ \"CardColor_Black\" ], \"power\": { \"value\": 1 }, \"toughness\": { \"value\": 1 }, \"name\": 1229, \"abilities\": [ 1 ], \"overlayGrpId\": 75504 } ], \"annotations\": [ { \"id\": 25, \"affectedIds\": [ 104 ], \"type\": [ \"AnnotationType_ObjectIdChanged\" ], \"details\": [ { \"key\": \"orig_id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 104 ] }, { \"key\": \"new_id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 160 ] } ] }, { \"id\": 26, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_ZoneTransfer\" ], \"details\": [ { \"key\": \"zone_src\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 35 ] }, { \"key\": \"zone_dest\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 27 ] }, { \"key\": \"category\", \"type\": \"KeyValuePairValueType_string\", \"valueString\": [ \"CastSpell\" ] } ] }, { \"id\": 27, \"affectorId\": 159, \"affectedIds\": [ 161 ], \"type\": [ \"AnnotationType_AbilityInstanceCreated\" ], \"details\": [ { \"key\": \"source_zone\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 28 ] } ] }, { \"id\": 28, \"affectorId\": 161, \"affectedIds\": [ 159 ], \"type\": [ \"AnnotationType_TappedUntappedPermanent\" ], \"details\": [ { \"key\": \"tapped\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] } ] }, { \"id\": 29, \"affectorId\": 159, \"affectedIds\": [ 161 ], \"type\": [ \"AnnotationType_AbilityInstanceDeleted\" ] }, { \"id\": 30, \"affectorId\": 2, \"affectedIds\": [ 161 ], \"type\": [ \"AnnotationType_UserActionTaken\" ], \"details\": [ { \"key\": \"actionType\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 4 ] }, { \"key\": \"abilityGrpId\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1003 ] } ] }, { \"id\": 31, \"affectorId\": 159, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_ManaPaid\" ], \"details\": [ { \"key\": \"id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] }, { \"key\": \"color\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] } ] }, { \"id\": 32, \"affectorId\": 2, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_UserActionTaken\" ], \"details\": [ { \"key\": \"actionType\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] }, { \"key\": \"abilityGrpId\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] } ], \"diffDeletedInstanceIds\": [ 161 ], \"prevGameStateId\": 5, \"timers\": [ { \"timerId\": 2, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990 } ], \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ], \"persistentAnnotations\": [ { \"id\": 4, \"affectorId\": 27, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_EnteredZoneThisTurn\" ] } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 17, \"gameStateId\": 7, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 7, \"turnInfo\": { \"phase\": \"Phase_Main1\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_BeginCombat\" }, \"prevGameStateId\": 6, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 18, \"gameStateId\": 8, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 8, \"turnInfo\": { \"phase\": \"Phase_Main1\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 2, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_BeginCombat\" }, \"zones\": [ { \"zoneId\": 27, \"type\": \"ZoneType_Stack\", \"visibility\": \"Visibility_Public\" }, { \"zoneId\": 28, \"type\": \"ZoneType_Battlefield\", \"visibility\": \"Visibility_Public\", \"objectInstanceIds\": [ 160, 159 ] } ], \"gameObjects\": [ { \"instanceId\": 160, \"grpId\": 75504, \"type\": \"GameObjectType_Card\", \"zoneId\": 28, \"visibility\": \"Visibility_Public\", \"ownerSeatId\": 2, \"controllerSeatId\": 2, \"cardTypes\": [ \"CardType_Creature\" ], \"subtypes\": [ \"SubType_Rat\" ], \"color\": [ \"CardColor_Black\" ], \"power\": { \"value\": 1 }, \"toughness\": { \"value\": 1 }, \"hasSummoningSickness\": true, \"name\": 1229, \"abilities\": [ 1 ], \"overlayGrpId\": 75504 } ], \"annotations\": [ { \"id\": 33, \"affectorId\": 160, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_ResolutionStart\" ], \"details\": [ { \"key\": \"grpid\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 75504 ] } ] }, { \"id\": 34, \"affectorId\": 160, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_ResolutionComplete\" ], \"details\": [ { \"key\": \"grpid\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 75504 ] } ] }, { \"id\": 35, \"affectorId\": 2, \"affectedIds\": [ 160 ], \"type\": [ \"AnnotationType_ZoneTransfer\" ], \"details\": [ { \"key\": \"zone_src\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 27 ] }, { \"key\": \"zone_dest\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 28 ] }, { \"key\": \"category\", \"type\": \"KeyValuePairValueType_string\", \"valueString\": [ \"Resolve\" ] } ] } ], \"prevGameStateId\": 7, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ], \"persistentAnnotations\": [ { \"id\": 5, \"affectorId\": 28, \"affectedIds\": [ 160, 159 ], \"type\": [ \"AnnotationType_EnteredZoneThisTurn\" ] } ], \"diffDeletedPersistentAnnotationIds\": [ 4 ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 19, \"gameStateId\": 9, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 9, \"turnInfo\": { \"phase\": \"Phase_Main1\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_BeginCombat\" }, \"prevGameStateId\": 8, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 20, \"gameStateId\": 10, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 10, \"turnInfo\": { \"phase\": \"Phase_Combat\", \"step\": \"Step_BeginCombat\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 2, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_DeclareAttack\" }, \"annotations\": [ { \"id\": 36, \"affectedIds\": [ 2 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] } ], \"prevGameStateId\": 9, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 21, \"gameStateId\": 11, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 11, \"turnInfo\": { \"phase\": \"Phase_Combat\", \"step\": \"Step_BeginCombat\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_DeclareAttack\" }, \"prevGameStateId\": 10, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 22, \"gameStateId\": 12, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 12, \"turnInfo\": { \"phase\": \"Phase_Combat\", \"step\": \"Step_DeclareAttack\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 2, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_EndCombat\" }, \"annotations\": [ { \"id\": 37, \"affectedIds\": [ 2 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 5 ] } ] } ], \"prevGameStateId\": 11, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 23, \"gameStateId\": 13, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 13, \"turnInfo\": { \"phase\": \"Phase_Combat\", \"step\": \"Step_DeclareAttack\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_EndCombat\" }, \"prevGameStateId\": 12, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 24, \"gameStateId\": 14, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 14, \"turnInfo\": { \"phase\": \"Phase_Combat\", \"step\": \"Step_EndCombat\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 2, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Main2\" }, \"annotations\": [ { \"id\": 38, \"affectedIds\": [ 2 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 8 ] } ] } ], \"prevGameStateId\": 13, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 25, \"gameStateId\": 15, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 15, \"turnInfo\": { \"phase\": \"Phase_Combat\", \"step\": \"Step_EndCombat\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Main2\" }, \"prevGameStateId\": 14, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 26, \"gameStateId\": 16, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 16, \"turnInfo\": { \"phase\": \"Phase_Main2\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 2, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Ending\", \"nextStep\": \"Step_End\" }, \"annotations\": [ { \"id\": 39, \"affectedIds\": [ 2 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 4 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] } ], \"prevGameStateId\": 15, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 27, \"gameStateId\": 17, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 17, \"turnInfo\": { \"phase\": \"Phase_Main2\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Ending\", \"nextStep\": \"Step_End\" }, \"prevGameStateId\": 16, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 28, \"gameStateId\": 18, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 18, \"turnInfo\": { \"phase\": \"Phase_Ending\", \"step\": \"Step_End\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 2, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Ending\", \"nextStep\": \"Step_Cleanup\" }, \"annotations\": [ { \"id\": 40, \"affectedIds\": [ 2 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 5 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] } ], \"prevGameStateId\": 17, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 29, \"gameStateId\": 19, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 19, \"turnInfo\": { \"phase\": \"Phase_Ending\", \"step\": \"Step_End\", \"turnNumber\": 1, \"activePlayer\": 2, \"priorityPlayer\": 1, \"decisionPlayer\": 2, \"nextPhase\": \"Phase_Ending\", \"nextStep\": \"Step_Cleanup\" }, \"prevGameStateId\": 18, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_SetSettingsResp\", \"systemSeatIds\": [ 1 ], \"msgId\": 30, \"gameStateId\": 19, \"setSettingsResp\": { \"settings\": { \"stops\": [ { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Set\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Set\" } ], \"autoPassOption\": \"AutoPassOption_ResolveMyStackEffects\", \"graveyardOrder\": \"OrderingType_OrderArbitraryAlways\", \"manaSelectionType\": \"ManaSelectionType_Auto\", \"defaultAutoPassOption\": \"AutoPassOption_ResolveMyStackEffects\", \"smartStopsSetting\": \"SmartStopsSetting_Enable\", \"autoTapStopsSetting\": \"AutoTapStopsSetting_Enable\", \"autoOptionalPaymentCancellationSetting\": \"Setting_Enable\", \"transientStops\": [ { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_UpkeepStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DrawStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PrecombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_BeginCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareAttackersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_DeclareBlockersStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_CombatDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndCombatStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_PostcombatMainPhase\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_EndStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Team\", \"status\": \"SettingStatus_Clear\" }, { \"stopType\": \"StopType_FirstStrikeDamageStep\", \"appliesTo\": \"SettingScope_Opponents\", \"status\": \"SettingStatus_Clear\" } ], \"autoSelectReplacementSetting\": \"Setting_Enable\" } } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 32, \"gameStateId\": 20, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 20, \"players\": [ { \"lifeTotal\": 20, \"systemSeatNumber\": 1, \"maxHandSize\": 7, \"turnNumber\": 1, \"teamId\": 1, \"timerIds\": [ 1 ], \"controllerSeatId\": 1, \"controllerType\": \"ControllerType_Player\", \"startingLifeTotal\": 20 } ], \"turnInfo\": { \"phase\": \"Phase_Beginning\", \"step\": \"Step_Upkeep\", \"turnNumber\": 2, \"activePlayer\": 1, \"priorityPlayer\": 1, \"nextPhase\": \"Phase_Beginning\", \"nextStep\": \"Step_Draw\" }, \"annotations\": [ { \"id\": 41, \"affectedIds\": [ 2 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 5 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 10 ] } ] }, { \"id\": 42, \"affectedIds\": [ 0 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] }, { \"id\": 43, \"affectorId\": 1, \"affectedIds\": [ 1 ], \"type\": [ \"AnnotationType_NewTurnStarted\" ] }, { \"id\": 44, \"affectedIds\": [ 1 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] } ] }, { \"id\": 45, \"affectedIds\": [ 1 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 2 ] } ] } ], \"prevGameStateId\": 19, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ], \"diffDeletedPersistentAnnotationIds\": [ 5 ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 33, \"gameStateId\": 21, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 21, \"turnInfo\": { \"phase\": \"Phase_Beginning\", \"step\": \"Step_Upkeep\", \"turnNumber\": 2, \"activePlayer\": 1, \"priorityPlayer\": 2, \"nextPhase\": \"Phase_Beginning\", \"nextStep\": \"Step_Draw\" }, \"prevGameStateId\": 20, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 34, \"gameStateId\": 22, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 22, \"turnInfo\": { \"phase\": \"Phase_Beginning\", \"step\": \"Step_Draw\", \"turnNumber\": 2, \"activePlayer\": 1, \"priorityPlayer\": 1, \"nextPhase\": \"Phase_Main1\" }, \"zones\": [ { \"zoneId\": 30, \"type\": \"ZoneType_Limbo\", \"visibility\": \"Visibility_Public\", \"objectInstanceIds\": [ 46, 104, 99 ] }, { \"zoneId\": 31, \"type\": \"ZoneType_Hand\", \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 1, \"objectInstanceIds\": [ 162, 45, 44, 43, 42, 41, 40, 39 ], \"viewers\": [ 1 ] }, { \"zoneId\": 32, \"type\": \"ZoneType_Library\", \"visibility\": \"Visibility_Hidden\", \"ownerSeatId\": 1, \"objectInstanceIds\": [ 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98 ] } ], \"gameObjects\": [ { \"instanceId\": 162, \"grpId\": 75556, \"type\": \"GameObjectType_Card\", \"zoneId\": 31, \"visibility\": \"Visibility_Private\", \"ownerSeatId\": 1, \"controllerSeatId\": 1, \"superTypes\": [ \"SuperType_Basic\" ], \"cardTypes\": [ \"CardType_Land\" ], \"subtypes\": [ \"SubType_Plains\" ], \"viewers\": [ 1 ], \"name\": 648, \"abilities\": [ 1001 ], \"overlayGrpId\": 75556 } ], \"annotations\": [ { \"id\": 46, \"affectedIds\": [ 1 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 1 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 3 ] } ] }, { \"id\": 47, \"affectedIds\": [ 46 ], \"type\": [ \"AnnotationType_ObjectIdChanged\" ], \"details\": [ { \"key\": \"orig_id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 46 ] }, { \"key\": \"new_id\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 162 ] } ] }, { \"id\": 48, \"affectedIds\": [ 162 ], \"type\": [ \"AnnotationType_ZoneTransfer\" ], \"details\": [ { \"key\": \"zone_src\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 32 ] }, { \"key\": \"zone_dest\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 31 ] }, { \"key\": \"category\", \"type\": \"KeyValuePairValueType_string\", \"valueString\": [ \"Draw\" ] } ] } ], \"prevGameStateId\": 21, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 162 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ], \"persistentAnnotations\": [ { \"id\": 9, \"affectorId\": 31, \"affectedIds\": [ 162 ], \"type\": [ \"AnnotationType_EnteredZoneThisTurn\" ] } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 35, \"gameStateId\": 23, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 23, \"turnInfo\": { \"phase\": \"Phase_Beginning\", \"step\": \"Step_Draw\", \"turnNumber\": 2, \"activePlayer\": 1, \"priorityPlayer\": 2, \"nextPhase\": \"Phase_Main1\" }, \"prevGameStateId\": 22, \"update\": \"GameStateUpdate_SendHiFi\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 162 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_GameStateMessage\", \"systemSeatIds\": [ 1 ], \"msgId\": 36, \"gameStateId\": 24, \"gameStateMessage\": { \"type\": \"GameStateType_Diff\", \"gameStateId\": 24, \"turnInfo\": { \"phase\": \"Phase_Main1\", \"turnNumber\": 2, \"activePlayer\": 1, \"priorityPlayer\": 1, \"decisionPlayer\": 1, \"nextPhase\": \"Phase_Combat\", \"nextStep\": \"Step_BeginCombat\" }, \"annotations\": [ { \"id\": 49, \"affectedIds\": [ 1 ], \"type\": [ \"AnnotationType_PhaseOrStepModified\" ], \"details\": [ { \"key\": \"phase\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 2 ] }, { \"key\": \"step\", \"type\": \"KeyValuePairValueType_int32\", \"valueInt32\": [ 0 ] } ] } ], \"pendingMessageCount\": 1, \"prevGameStateId\": 23, \"timers\": [ { \"timerId\": 1, \"type\": \"TimerType_Inactivity\", \"durationSec\": 1020, \"running\": true, \"behavior\": \"TimerBehavior_Timeout\", \"warningThresholdSec\": 990 } ], \"update\": \"GameStateUpdate_SendAndRecord\", \"actions\": [ { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Cast\", \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ] } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 42 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 43 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 44 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 45 } }, { \"seatId\": 1, \"action\": { \"actionType\": \"ActionType_Play\", \"instanceId\": 162 } }, { \"seatId\": 2, \"action\": { \"actionType\": \"ActionType_Activate\", \"abilityGrpId\": 1003, \"sourceId\": 159 } } ] } }, { \"type\": \"GREMessageType_ActionsAvailableReq\", \"systemSeatIds\": [ 1 ], \"msgId\": 37, \"gameStateId\": 24, \"prompt\": { \"promptId\": 2 }, \"actionsAvailableReq\": { \"actions\": [ { \"actionType\": \"ActionType_Cast\", \"grpId\": 75451, \"instanceId\": 39, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ], \"shouldStop\": true }, { \"actionType\": \"ActionType_Cast\", \"grpId\": 75451, \"instanceId\": 40, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ], \"shouldStop\": true }, { \"actionType\": \"ActionType_Cast\", \"grpId\": 75450, \"instanceId\": 41, \"manaCost\": [ { \"color\": [ \"ManaColor_Generic\" ], \"count\": 1 }, { \"color\": [ \"ManaColor_White\" ], \"count\": 1 } ], \"shouldStop\": true }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 42, \"shouldStop\": true }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 43, \"shouldStop\": true }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 44, \"shouldStop\": true }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 45, \"shouldStop\": true }, { \"actionType\": \"ActionType_Play\", \"grpId\": 75556, \"instanceId\": 162, \"shouldStop\": true }, { \"actionType\": \"ActionType_Pass\" } ] } } ] } }";
        string test_line = "{ \"transactionId\": \"f9283022-6d5b-43e7-8a43-55b02e6be06f\", \"timestamp\": \"637500334416737677\", \"matchGameRoomStateChangedEvent\": { \"gameRoomInfo\": { \"gameRoomConfig\": { \"eventId\": \"[CampaignGraph]ColorChallenge_white03\", \"reservedPlayers\": [ { \"userId\": \"AXTAOIX27RHBPOW2E5742I4ANY\", \"playerName\": \"nsy#32084\", \"systemSeatId\": 1, \"teamId\": 1, \"connectionInfo\": { \"connectionState\": \"ConnectionState_Open\" }, \"courseId\": \"00000000-0000-0000-0000-000000000000\" }, { \"userId\": \"AXTAOIX27RHBPOW2E5742I4ANY_Familiar\", \"playerName\": \"Jace Beleren\", \"systemSeatId\": 2, \"teamId\": 2, \"connectionInfo\": { \"connectionState\": \"ConnectionState_Open\" }, \"courseId\": \"00000000-0000-0000-0000-000000000000\" } ], \"matchId\": \"0c8b617b-3a6e-4ecb-89c5-7f7664569521\", \"matchConfig\": { }, \"greConfig\": { \"gameStateRedactorConfiguration\": { \"enableRedaction\": true, \"enableForceDiff\": true }, \"clipsConfiguration\": { }, \"checkpointConfiguration\": { } }, \"greHostLoggerLevel\": \"Info\", \"joinRoomTimeoutSecs\": 30, \"playerDisconnectTimeoutSecs\": 30 }, \"stateType\": \"MatchGameRoomStateType_Playing\", \"players\": [ { \"userId\": \"AXTAOIX27RHBPOW2E5742I4ANY\", \"systemSeatId\": 1 }, { \"userId\": \"AXTAOIX27RHBPOW2E5742I4ANY_Familiar\", \"systemSeatId\": 2 } ] } } }";

        string getGameStage(dynamic jsonRecord)
        {
            string val = null;
            try
            {
                val = jsonRecord["greToClientEvent"]["greToClientMessages"][0]["gameStateMessage"]["gameInfo"]["stage"];
            }
            catch (Exception)
            {
            }
            return val;
        }

        string getCards(dynamic jsonRecord)
        {
            string val = null;

            var test1 = jsonRecord["greToClientEvent"]["greToClientMessages"];
            var test2 = jsonRecord["greToClientEvent"]["greToClientMessages"][0];
            var test3 = jsonRecord["greToClientEvent"]["greToClientMessages"][0]["gameStateMessage"];
            try
            {
                val = jsonRecord["greToClientEvent"]["greToClientMessages"];
                foreach (var item in val)
                {

                }
            }
            catch (Exception)
            {
            }
            return val;
        }
        object[] deckCards(dynamic jsonRecord)
        {
            object[] obj = null;
            try
            {
                obj = jsonRecord["greToClientEvent"]["greToClientMessages"][0]["connectResp"]["deckMessage"]["deckCards"];
            }
            catch (Exception)
            {
            }
            return obj;
        }
        List<string> playCard(dynamic jsonRecord)
        {
            //if x["greToClientEvent"]["greToClientMessages"][2]["gameStateMessage"][
            //    "turnInfo"][
            //    "activePlayer"] == 1:
            //                        f += 1
            //                        for d in x["greToClientEvent"]["greToClientMessages"]:
            //                            if d["type"] == "GREMessageType_ActionsAvailableReq":
            //                                c.ui.textEdit.append(f"#: {str(f)}")
            //                                for m in d["actionsAvailableReq"]["actions"]:

            //                                    if m["actionType"] == "ActionType_Cast":
            //                                        print(f"Player draws: {m['grpId']}")
            //                                        c.ui.textEdit.append(f"Player draws: {m['grpId']}")
            //                                        #
            //                                        # textCursor = c.ui.textEdit.textCursor()
            //                                        # textCursor.setPosition(c.ui.textEdit.document().characterCount())
            //                                        # c.ui.textEdit.setTextCursor(textCursor)
            //                                    if m["actionType"] == "ActionType_Play":
            //                                        print(f"Player played: {m['grpId']}")
            //                                        c.ui.textEdit.append(f"Player played: {m['grpId']}")
            List<string> cards = new List<string>();
            var obj = jsonRecord["greToClientEvent"]["greToClientMessages"];
            foreach (var item in obj)
            {
                if (item["type"] == "GREMessageType_ActionsAvailableReq")
                {
                    foreach (var item2 in item["actionsAvailableReq"]["actions"])
                    {
                        if (item2["actionType"] == "ActionType_Cast")
                        {

                        }
                        else if (item2["actionType"] == "ActionType_Play")
                        {
                            cards.Add(item2["grpId"]);
                        }

                    }
                }
            }

            try
            {
            }
            catch (Exception)
            {
            }
            return cards;
        }


        private void ReadLines(string path)
        {
            using (var fs = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite | FileShare.Delete))
            using (var reader = new StreamReader(fs))
            {
                while (true)
                {
                    var line = reader.ReadLine();

                    if (!String.IsNullOrWhiteSpace(line))
                        Console.WriteLine("Line read: " + line);
                }
            }
        }

        private void AppendLogText(System.Windows.Controls.TextBox textBox, string text)
        {
            Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() =>
            {
                textBox.Text = textBox.Text + text;
            }));
        }

        private void ReadTest(string path)
        {
            var fs = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite | FileShare.Delete);

            for (offset = 1; offset <= fs.Length; offset++)
            {
                fs.Seek(-offset, SeekOrigin.End);
                Console.Write(Convert.ToChar(fs.ReadByte()));
            }
            Console.WriteLine();

            fs.Seek(20, SeekOrigin.Begin);

            while ((nextByte = fs.ReadByte()) > 0)
            {
                Console.Write(Convert.ToChar(nextByte));
            }
            Console.WriteLine();
        }

        private void WriteLogText(System.Windows.Controls.TextBlock textBlock, string text)
        {
            Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() =>
            {
                textBlock.Text = text;
            }));
        }
    }
}